{% extends "base.html" %}
{% block title %}–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤{% endblock %}

{% block content %}
    <h1 class="page-title">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h1>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
    <form method="GET" action="" class="filter-form">
        <input type="text" class="search search-input" placeholder="–ü–æ–∏—Å–∫..." name="search" value="{{ search_query }}">
        <select name="filter_by" style="border: 1px solid #ccc; border-radius: 20px;height: 40px; padding: 10px; color: #ccc; font-size: 16px;">
            <option value="all" {% if filter_by == "all" %}selected{% endif %}>–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
            <option value="price" {% if filter_by == "price" %}selected{% endif %}>–ü–æ —Ü–µ–Ω–µ</option>
            <option value="date" {% if filter_by == "date" %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ</option>
        </select>
        <button type="submit" style="border: 1px solid #ccc; padding: 10px; border-radius: 20px; cursor: pointer;">‚úî</button>
    </form>

    <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
    <div style="border: 1px solid #ccc; padding: 10px; border-radius: 20px; cursor: pointer;">
        <a href="{% url 'basket_detail' %}" style="text-decoration: none; color: #363751; font-weight: 400;">
            üõí {{ basket_count }} —Ç–æ–≤–∞—Ä–æ–≤
        </a>
    </div>

    <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="content">
        {% for item in coffee %}
            <div class="card">
                <img src="{{ item.image_url }}" alt="{{ item.name }}">
                <h1>       
                    <a class="cardName" href="{% url 'coffee_detail' coffee_id=item.id %}">{{ item.name }}</a>
                </h1>
                <aside>
                    <p class="cardText">–¶–µ–Ω–∞: {{ item.price }} ‚ÇΩ</p>
                    <p class="cardText">–î–∞—Ç–∞: {{ item.date }}</p>
                </aside>
                {% if item.added_to_basket %}
                    <p style="font-size: 20px; color: darkred;  margin-top: 7px; padding: 10px;"> –£–∂–µ –≤ –≤–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω–µ :) </p>
                {% else %}
                    <form method="POST" action="{% url 'add_to_basket' item.id %}">
                        {% csrf_token %}
                        <button class="submitButton" type="submit">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    <footer>
        <p>
            ¬© 2017 - 2025 Vlado`s coffee bar
        </p>
    </footer>
{% endblock %}