{% extends "base.html" %}
{% block title %}–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤{% endblock %}

{% block content %}
    <h1 class="page-title">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h1>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
    <form method="GET" action="" class="filter-form">
        <input type="text" class="search search-input" placeholder="–ü–æ–∏—Å–∫..." name="search" value="{{ search_query }}">
        <select name="filter_by" class="filter-select">
            <option value="all" {% if filter_by == "all" %}selected{% endif %}>–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
            <option value="price" {% if filter_by == "price" %}selected{% endif %}>–ü–æ —Ü–µ–Ω–µ</option>
            <option value="date" {% if filter_by == "date" %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ</option>
        </select>
        <button type="submit" class="filter-button">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </form>

    <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
    <div class="basket-summary">
        <a href="{% url 'basket_detail' %}" class="basket-link">
            üõí –ö–æ—Ä–∑–∏–Ω–∞ ({{ basket_count }} —Ç–æ–≤–∞—Ä–æ–≤)
        </a>
    </div>

    <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="content">
        {% for item in coffee %}
            <div class="card">
                <img src="{{ item.image_url }}" alt="{{ item.name }}">
                <h1>       
                    <a href="{% url 'coffee_detail' coffee_id=item.id %}">{{ item.name }}</a>
                </h1>
                <p class="product-price">–¶–µ–Ω–∞: {{ item.price }} ‚ÇΩ</p>
                <p class="product-date">–î–∞—Ç–∞: {{ item.date }}</p>
                {% if item.added_to_basket %}
                    <div>
                        <img src="" alt="">
                    </div>>
                {% else %}
                    <form method="POST" action="{% url 'add_to_basket' item.id %}">
                        {% csrf_token %}
                        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock %}